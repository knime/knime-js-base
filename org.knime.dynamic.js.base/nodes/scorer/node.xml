<?xml version="1.0" encoding="utf-8"?>
<js:knimeNode xmlns:js="http://knime.org/dynamicjsnode/v3.0"
	xmlns="http://knime.org/dynamicnode/v3.0" xmlns:n="http://knime.org/node/v2.12"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://knime.org/dynamicjsnode/v3.0 http://www.knime.org/node/dynamicJSNode_v3.0.xsd"
	jsNamespace="scorer_namespace" nodeID="scorerJS" categoryPath="/analytics/mining/modeleval"
    icon="./scorer.png" type="Other">
    
    <name>Scorer (JavaScript)</name>
    <shortDescription>An Accuracy Scorer Node with a JavaScript view.</shortDescription>
    <fullDescription>
    	<intro>Compares two columns by their attribute value pairs and shows the confusion matrix, i.e. how many rows of which attribute and their classification match. Additionally, it is possible to hilight cells of this matrix to determine the underlying rows. The dialog allows you to select two columns for comparison; the values from the first selected column are represented in the confusion matrix's rows and the values from the second column by the confusion matrix's columns. The output of the node is the confusion matrix with the number of matches in each cell. Additionally, the second out-port reports a number of accuracy statistics such as True-Positives, False-Positives, True-Negatives, False-Negatives, Recall, Precision, Sensitivity, Specificity, F-measure, as well as the overall accuracy and Cohen's kappa.</intro>
		<tab name="Scorer Options">
			<options>
				<columnSelectorOption name="First column" id="first_column" inPortIndex="0" label="Actual column" filterClasses="org.knime.core.data.DataValue">
					The actual column contains the actual classes of the data.
				</columnSelectorOption>
				<columnSelectorOption name="Second column" id="second_column" inPortIndex="0" label="Predicted column" filterClasses="org.knime.core.data.DataValue">
					The predicted column contains the predicted classes of the data.
				</columnSelectorOption>
 				<radioButtonOption name="Sorting Strategy" id="sorting_strategy" 
					possibleValues="Lexical Insertion&#160;Order" label="Sorting Strategy" defaultValue="Lexical">
				</radioButtonOption>
				<checkBoxOption name="Reverse order" id="reverse_order" 
                    label="Reverse order" defaultValue="false" loadDefaults="true">
                    Reverse the order of the elements.
                </checkBoxOption>
                <checkBoxOption name="Ignore missing values" id="ignore_missing_values" 
                    label="Ignore missing values" defaultValue="true" loadDefaults="true">
					Choose how to treat missing values in either the reference or prediction column. Default is to ignore them (treat them as if the row did not exist). Alternatively, you can expect the table to not contain missing values in these two columns. If they do, the node will fail during execution.
                </checkBoxOption>
			</options>
		</tab>
		<tab name="General View Options">
			<options>
				<stringOption name="Title" id="title" label="Title" defaultValue="Scorer View" optional="true" saveInView="true">
					The view title.
				</stringOption>
				<stringOption name="Subtitle" id="subtitle" label="Subtitle" optional="true" saveInView="true">
					The view subtitle.
				</stringOption>
				<checkBoxOption name="Display confusion matrix rates" id="displayCMRates"
                    label="Display confusion matrix rates" defaultValue="true" loadDefaults="true" saveInView="true">
                    Check to display the confusion matrix's rows and columns totals as rates.
                </checkBoxOption>
				<colorOption name="Header color" id="header_color" label="Header color" format="HexString" defaultR="255" defaultG="240" defaultB="199">
					Color used for the header sections of the tables (rows or column headers).
				</colorOption>
				<colorOption name="Diagonal color" id="diag_color" label="Diagonal color" format="HexString" defaultR="166" defaultG="192" defaultB="197">
					Color used for highlighting the values on the diagonal of the confusion matrix (the correct predictions).
				</colorOption>
				<checkBoxOption name="Display fullscreen button" id="displayFullscreenButton"
                    label="Display fullscreen button" defaultValue="true" loadDefaults="true">
                    Check to display a button which switches the view into fullscreen mode. The button is only available in the KNIME WebPortal.
                </checkBoxOption>
                <checkBoxOption name="Show warnings in view" id="showWarnings" 
				    label="Show warnings in view" defaultValue="true" loadDefaults="true">
                    If checked, warning messages will be displayed in the view when they occur.
                </checkBoxOption>
			</options>
		</tab>
		<tab name="Class Statistics Options">
			<options>
				<checkBoxOption name="Display class statistics table" id="displayClassStatistics"
                    label="Display class statistics table" defaultValue="false" loadDefaults="true" saveInView="true">
                    Check to display the class statistics table.
                </checkBoxOption>	
				<checkBoxOption name="Display true positives for each class" id="displayTruePositives"
                    label="Display true positives" defaultValue="true" loadDefaults="true">
                    Check to display the true positives in the class statistics table.
                </checkBoxOption>
                <checkBoxOption name="Display false positives for each class" id="displayFalsePositives"
                    label="Display false positives" defaultValue="true" loadDefaults="true">
                    Check to display the false positives in the class statistics table.
                </checkBoxOption>
				<checkBoxOption name="Display true negatives for each class" id="displayTrueNegatives"
                    label="Display true negatives" defaultValue="true" loadDefaults="true">
                    Check to display the true negatives in the class statistics table.
                </checkBoxOption>
                <checkBoxOption name="Display false negatives for each class" id="displayFalseNegatives"
                    label="Display false negatives" defaultValue="true" loadDefaults="true">
                    Check to display the false negatives in the class statistics table.
                </checkBoxOption>                
				<checkBoxOption name="Display accuracy for each class" id="displayAccuracy"
                    label="Display accuracy" defaultValue="true" loadDefaults="true">
                    Check to display the accuracy in the class statistics table.
                </checkBoxOption>
				<checkBoxOption name="Display balanced accuracy for each class" id="displayBalancedAccuracy"
                    label="Display balanced accuracy" defaultValue="true" loadDefaults="true">
                    Check to display the balanced accuracy in the class statistics table.
                </checkBoxOption>                
				<checkBoxOption name="Display error rate for each class" id="displayErrorRate"
                    label="Display error rate" defaultValue="true" loadDefaults="true">
                    Check to display the error rate in the class statistics table.
                </checkBoxOption>
                <checkBoxOption name="Display false negative rate for each class" id="displayFalseNegativeRate"
                    label="Display false negative rate" defaultValue="true" loadDefaults="true">
                    Check to display the false negative rate in the class statistics table.
                </checkBoxOption>
				<checkBoxOption name="Display recall for each class" id="displayRecall"
                    label="Display recall" defaultValue="true" loadDefaults="true">
                    Check to display the recall in the class statistics table.
                </checkBoxOption>
				<checkBoxOption name="Display precision for each class" id="displayPrecision"
                    label="Display precision" defaultValue="true" loadDefaults="true">
                    Check to display the precision in the class statistics table.
                </checkBoxOption>                
				<checkBoxOption name="Display sensitivity for each class" id="displaySensitivity"
                    label="Display sensitivity" defaultValue="true" loadDefaults="true">
                    Check to display the sensitivity in the class statistics table.
                </checkBoxOption>
                <checkBoxOption name="Display specificity rate for each class" id="displaySpecificity"
                    label="Display specificity" defaultValue="true" loadDefaults="true">
                    Check to display the specificity in the class statistics table.
                </checkBoxOption>                
                <checkBoxOption name="Display F-measure for each class" id="displayFMeasure"
                    label="Display F-measure" defaultValue="true" loadDefaults="true">
                    Check to display the F-measure in the class statistics table.
                </checkBoxOption>                
			</options>
		</tab>
		<tab name="Overall Statistics Options">
			<options>
				<checkBoxOption name="Display overall statistics table" id="displayOverallStatistics"
                    label="Display overall statistics table" defaultValue="true" loadDefaults="true" saveInView="true">
                    Check to display the overall statistics table.
                </checkBoxOption>				
				<checkBoxOption name="Display overall accuracy" id="displayOverallAccuracy"
                    label="Display overall accuracy" defaultValue="true" loadDefaults="true">
                    Check to display the overall accuracy in the overall statistics table.
                </checkBoxOption>
				<checkBoxOption name="Display overall error" id="displayOverallError"
                    label="Display overall error" defaultValue="true" loadDefaults="true">
                    Check to display the overall error in the overall statistics table.
                </checkBoxOption>
				<checkBoxOption name="Display Cohen's kappa" id="displayCohensKappa"
                    label="Display Cohen's kappa" defaultValue="true" loadDefaults="true">
                    Check to display the Cohen's kappa in the overall statistics table.
                </checkBoxOption>
				<checkBoxOption name="Display correct classified" id="displayCorrectClassified"
                    label="Display correct classified" defaultValue="true" loadDefaults="true">
                    Check to display the correct classified in the overall statistics table.
                </checkBoxOption>
				<checkBoxOption name="Display wrong classified" id="displayWrongClassified"
                    label="Display wrong classified" defaultValue="true" loadDefaults="true">
                    Check to display the wrong classified in the overall statistics table.
                </checkBoxOption>
			</options>
		</tab>		
		<tab name="Control Options">
			<options>
				<checkBoxOption name="Enable view controls" id="enableViewControls"
					label="Enable view controls" defaultValue="true">
					Check to enable controls in the chart.
				</checkBoxOption>
				<checkBoxOption name="Enable Title editing" id="enableTitleEdit"
					label="Enable Title editing" defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable the editing of the title within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable Subtitle editing" id="enableSubtitleEdit"
					label="Enable Subtitle editing" defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable the editing of the subtitle within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable Confusion Matrix rates display" id="enableCMRatesDisplay"
					label="Enable Confusion Matrix rates display" defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable the display of the Confusion Matrix's rows and columns totals as rates.
				</checkBoxOption>				
				<checkBoxOption name="Enable Class Statistics display" id="enableClassStatisticsDisplay"
					label="Enable Class Statistics display" defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable the display of the class statistics table.
				</checkBoxOption>
			</options>
		</tab>		
		
    </fullDescription>
    
    <interactiveView name="Confusion Matrix"></interactiveView>
    <ports>
    	<inPort portType="Data" name="Input table" index="0">Table containing at least two columns to compare.</inPort>
    </ports>
    
    <js:resources>
    	<js:resource type="js" path="scorer.js"/>
    	<js:resource type="css" path="scorer.css"/>
    </js:resources>
    <js:dependencies>
    	<js:dependency name="KnimeTable" path="KnimeTable_1.0.0" type="local" />
		<js:dependency name="jQuery" path="jQuery_3.1.1" type="local" />
		<js:dependency name="D3" path="D3_3.2.8" type="local" />
	</js:dependencies>
    <js:javaProcessor className="org.knime.dynamic.js.base.scorer.ScorerProcessor" hidesLimitRowOption="true" />
</js:knimeNode>